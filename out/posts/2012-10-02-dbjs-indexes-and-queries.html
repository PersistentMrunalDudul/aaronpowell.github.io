<!DOCTYPE HTML>
<!--
    Strongly Typed 1.0 by HTML5 UP
    html5up.net | @n33co
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
  <meta charset="utf-8">
  <title>Indexes and Queries in db.js - LINQ to Fail</title>
  <meta name="author" content="Aaron Powell">
  <meta name="viewport" content="width=1040" />
  <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Arvo:700" rel="stylesheet" type="text/css" />
  <link href="/css/highlightjs/solarized_light.css" rel="stylesheet" type="text/css" />
  <script src="/js/jquery-1.9.1.min.js"></script>
  <script src="/js/jquery.dropotron-1.3.js"></script>
  <script src="/js/config.js"></script>
  <script src="/js/skel.min.js"></script>
  <script src="/js/skel-ui.min.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/skel-noscript.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/style-desktop.css" />
  </noscript>
  <!--[if lte IE 8]><script src="/js/html5shiv.js"></script><![endif]-->

</head>

    <body class="left-sidebar">

        <div id="header-wrapper">
            <div id="header" class="container">
                <h1 id="logo">Indexes and Queries in db.js</h1>
                <h2>2nd October 2012</h2>
                <ul class="tags">
    
        <li><a class="icon icon-tag" href="/tagged/indexeddb.html"><span>indexeddb</span></a></li>
    
        <li><a class="icon icon-tag" href="/tagged/web.html"><span>web</span></a></li>
    
        <li><a class="icon icon-tag" href="/tagged/winjs.html"><span>winjs</span></a></li>
    
</ul>
                <!-- Nav -->
<nav id="nav">
    <ul>
        <li><a class="icon icon-home" href="/"><span>Home</span></a></li>
        <li><a class="icon icon-github" href="https://github.com/aaronpowell"><span>aaronpowell</span></a></li>
        <li><a class="icon icon-twitter" href="http://twitter.com/slace"><span>@slace</span></a></li>
        <li><a class="icon icon-book" href="/about"><span>About Me</span></a></li>
        <li><a class="icon icon-rss" href="/feed"><span>Feed</span></a></li>
    </ul>
</nav>

            </div>
        </div>

        <div id="main-wrapper">
            <div id="main" class="container">
                <div class="row">
                    <div id="sidebar" class="4u">
    <section>
        <ul class="divided">
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">30th May 2013</span>
                            <h3><a href="/posts/2013-05-30-libraries.html">Flight Mode - Libraries</a></h3>
                        </header>
                        <p>Throughout the last few posts we&#39;ve looked at the different ways which we can store data offline in browsers and then created a basic little API that will help is with doing that. The <code>FlightMode</code> ...</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/flight-mode.html"><span>flight-mode</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/indexeddb.html"><span>indexeddb</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/localStorage.html"><span>localStorage</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/sessionStorage.html"><span>sessionStorage</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/offline-storage.html"><span>offline-storage</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">27th May 2013</span>
                            <h3><a href="/posts/2013-05-27-indexeddb.html">Flight Mode - IndexedDB</a></h3>
                        </header>
                        <p>The next stop in our offline storage adventure is to look at the big daddy of offline storage, <a href="http://www.w3.org/TR/IndexedDB/">IndexedDB</a>. Now I&#39;ve [blogged about <code>IndexedDB</code> in the past](http://...</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/flight-mode.html"><span>flight-mode</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/offline-storage.html"><span>offline-storage</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/indexeddb.html"><span>indexeddb</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">19th April 2013</span>
                            <h3><a href="/posts/2013-04-19-ie-useragents.html">Internet Explorer userAgents</a></h3>
                        </header>
                        <p>A new program from the IE team</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/internet-explorer.html"><span>internet-explorer</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/web.html"><span>web</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">10th April 2013</span>
                            <h3><a href="/posts/2013-04-10-wdc13.html">IndexedDB at Web Directions Code 13</a></h3>
                        </header>
                        <p>Upcoming speaking on IndexedDB</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/speaking.html"><span>speaking</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/indexeddb.html"><span>indexeddb</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">22nd January 2013</span>
                            <h3><a href="/posts/2013-01-22-hello-mathy.html">Hello mathy</a></h3>
                        </header>
                        <p>An introduction to another new library from me, this time it&#39;s mathy, a simple formula parser</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/typescript.html"><span>typescript</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/web.html"><span>web</span></a>
                            
                        </div>
                    </article>
                </li>
            
        </ul>
    </section>
</div>

                    <div id="content" class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <p>In my <a href="/web/hello-dbjs">last post</a> I introduced a new library I&#39;ve been working on for <a href="http://www.w3.org/TR/IndexedDB/">IndexedDB</a> called <a href="https://github.com/aaronpowell/db.js">db.js</a>.</p>
<p>One thing that I was slow in my understanding of with IndexedDB is how <a href="http://www.w3.org/TR/IndexedDB/#index-concept">indexes</a> work, and just how powerful they can be. Now that I&#39;ve got that <em>down pat</em> the support in db.js is greatly improved. Also a big shout out to <a href="https://github.com/bobwallis">Bob Wallis</a> who did a great job at adding the initial revision of index range queries.</p>
<h1>Creating a key path</h1>
<p>When creating an object store, or table if you will, you&#39;re most likely going to want to have some kind of unique identifier for each record; this is what the role of the key path is. To create a key path when you define the schema for your database you can provide it with the <code>key</code> property:</p>
<pre class="highlighted"><code class="smalltalk">db.open({
    <span class="method">name:</span> <span class="string">'my-app'</span>,
    <span class="method">version:</span> <span class="number">1</span>,
    <span class="method">schema:</span> {
        <span class="method">people:</span> {
            <span class="method">key:</span> {
                <span class="method">keyPath:</span> <span class="string">'id'</span>,
                <span class="method">autoIncrement:</span> <span class="keyword">true</span>
            }
        }
    }
});</code></pre>
<p>What I&#39;ve done here is defined that I want to have a property added to my objects called <code>id</code> which will be auto-incrementing (which will make it a number). Now when I add a new person the object will have a new property:</p>
<pre class="highlighted"><code class="applescript">server.people
    .add({
        firstName: 'Aaron',
        lastName: 'Powell'
    })
    .done(function (person) {
        console.<span class="command">log</span>(person.<span class="property">id</span>); //<span class="function_start"><span class="keyword">on</span> <span class="title">a</span></span> clean db this will be <span class="number">1</span>
    });</code></pre>
<p>This key is useful if you want to access unique records from your store.</p>
<h1>Creating an index</h1>
<p>While a key path is useful for a narrow set of scenarios it&#39;s likely that you&#39;ll be doing queries that are against other information in the store. Let&#39;s take our example and say we wanted to be able to query against the <code>firstName</code> property. For this we would want to create a non-unique index for our records:</p>
<pre class="highlighted"><code class="smalltalk">db.open({
    <span class="method">name:</span> <span class="string">'my-app'</span>,
    <span class="method">version:</span> <span class="number">1</span>,
    <span class="method">schema:</span> {
        <span class="method">people:</span> {
            <span class="method">key:</span> {
                <span class="method">keyPath:</span> <span class="string">'id'</span>,
                <span class="method">autoIncrement:</span> <span class="keyword">true</span>
            },
            <span class="method">indexes:</span> {
                <span class="method">firstName:</span> { }
            }
        }
    }
});</code></pre>
<p>Now if we were to inspect our <code>person</code> store we would find an <code>indexName</code> of <code>firstName</code>. This allows us to perform queries against said index and have it perform much faster than manually filtering the records ourselves, especially in large data sets.</p>
<p>You can create multiple indexes here by adding more properties to the <code>indexes</code> property on the schema. If you want to set any of the <a href="http://www.w3.org/TR/IndexedDB/#dfn-options-object">index parameters (IDBIndexParameters)</a> you can provide them as properties of the object for the index.</p>
<h1>Querying an index</h1>
<p>Initially I didn&#39;t really wrap my head around indexes very well and when I started db.js there wasn&#39;t a whole lot of useful IndexedDB articles, most of the stuff you had to work out by reading the specification (which is so not written for consumers of an API!). Luckily now db.js has really good support for indexes and how you can query them.</p>
<p>Let&#39;s look at how we could query an index for all people with the first name of <em>Aaron</em>:</p>
<pre class="highlighted"><code class="brainfuck"><span class="comment">server</span>.<span class="comment">people</span>
    <span class="string">.</span><span class="comment">query('firstName')</span>
    <span class="string">.</span><span class="comment">only('Aaron')</span>
    <span class="string">.</span><span class="comment">execute()</span>
    <span class="string">.</span><span class="comment">done(function</span> <span class="comment">(people)</span> <span class="comment">{</span>
        <span class="comment">//Do</span> <span class="comment">stuff</span> <span class="comment">with</span> <span class="comment">all</span> <span class="comment">the</span> <span class="comment">Aaron's</span>
    <span class="comment">});</code></pre>
<p>The first thing that&#39;s different compared to the query in my <a href="/web/hello-dbjs">last post</a> is when we invoke the <code>query</code> method we are providing it with the name of the index we want to query.</p>
<p>Next off we&#39;re using the <code>only</code> method. This method opens up a <a href="http://www.w3.org/TR/IndexedDB/#dfn-key-range">IDBKeyRange</a> of type <a href="http://www.w3.org/TR/IndexedDB/#widl-IDBKeyRange-only-static-IDBKeyRange-any-value">only</a> which will then select values that match that value exactly. This is very quick for reducing the amount of records returned from the object store itself.</p>
<h1>Querying across ranges</h1>
<p>Sometimes you want a range of data, say you want people who are in a certain age bracket. Let&#39;s pretend that we have a numerical <code>age</code> property on our person object and we&#39;ve created an index for it exactly the same way we created the <code>firstName</code> index. Now through the magic of db.js (well, IndexedDB :P) we can perform a set of range queries:</p>
<pre class="highlighted"><code class="sql">server.people
    .query('age')
    .lowerBound(28 <span class="comment">/*, true */</span>) //by default it's an inclusive query, <span class="operator"><span class="keyword">set</span> <span class="keyword">to</span> <span class="string">`true`</span> <span class="keyword">to</span> be exclusive
    .<span class="keyword">execute</span>()
    .done(function (people) {
        //<span class="keyword">all</span> the people who <span class="keyword">are</span> <span class="number">28</span> years <span class="keyword">or</span> older
    });</span>

server.people
    .query('age')
    .upperBound(28 <span class="comment">/*, true */</span>) //by default it's an inclusive query, <span class="operator"><span class="keyword">set</span> <span class="keyword">to</span> <span class="string">`true`</span> <span class="keyword">to</span> be exclusive
    .<span class="keyword">execute</span>()
    .done(function (people) {
        //<span class="keyword">all</span> the people who <span class="keyword">are</span> <span class="number">28</span> years <span class="keyword">or</span> younger
    });</span>

server.people
    .query('age')
    .bound(25 ,35 <span class="comment">/*, true , true */</span>) //by default it's an inclusive query, <span class="operator"><span class="keyword">set</span> <span class="keyword">to</span> <span class="string">`true`</span> <span class="keyword">to</span> be exclusive
    .<span class="keyword">execute</span>()
    .done(function (people) {
        //<span class="keyword">all</span> the people who <span class="keyword">are</span> between <span class="number">25</span> <span class="keyword">and</span> <span class="number">35</span>, inclusive
    });</span></code></pre>
<p>This shows the usage of:</p>
<ul>
<li><a href="http://www.w3.org/TR/IndexedDB/#widl-IDBKeyRange-lowerBound-static-IDBKeyRange-any-lower-boolean-open"><code>lowerBound</code></a><ul>
<li>Get records using the provided value as a starting point</li>
<li>Optional second argument to if we want an exclusive query instead of inclusive, which is the default</li>
</ul>
</li>
<li><a href="http://www.w3.org/TR/IndexedDB/#widl-IDBKeyRange-upperBound-static-IDBKeyRange-any-upper-boolean-open"><code>upperBound</code></a><ul>
<li>Get records using the provided value as an ending point</li>
<li>Optional second argument to if we want an exclusive query instead of inclusive, which is the default</li>
</ul>
</li>
<li><a href="http://www.w3.org/TR/IndexedDB/#widl-IDBKeyRange-bound-static-IDBKeyRange-any-lower-any-upper-boolean-lowerOpen-boolean-upperOpen"><code>bound</code></a><ul>
<li>Gets values between a range</li>
<li>The 3rd and 4th arguments represent the exclusive nature, both default to <code>false</code>, implying inclusive but you can control the boundaries individually</li>
</ul>
</li>
</ul>
<p>These methods are from IndexedDB in pretty much their raw format but exposed in db.js so we can easily use the chaining to do the querying. And the advantages of these ranges is the same as when you look at a <em>real</em> database, we only take a subset of the record set so it should be quicker.</p>
<h1>Advanced querying of indexes</h1>
<p>So now we&#39;ve got the basics down of creating a query against an index let&#39;s look at some of the more advanced features of db.js&#39;s query API.</p>
<h2>Sort order</h2>
<p>By default db.js (well more accurately IndexedDB) will return your data in ascending order. Assuming we&#39;ve stored the following information:</p>
<pre class="highlighted"><code class="smalltalk">var people = [{
    <span class="method">firstName:</span> <span class="string">'Aaron'</span>,
    <span class="method">lastName:</span> <span class="string">'Powell'</span>,
    <span class="method">age:</span> <span class="number">28</span>
}, {
    <span class="method">firstName:</span> <span class="string">'John'</span>,
    <span class="method">lastName:</span> <span class="string">'Smith'</span>,
    <span class="method">age:</span> <span class="number">30</span>
}, {
    <span class="method">firstName:</span> <span class="string">'Bill'</span>,
    <span class="method">lastName:</span> <span class="string">'Jones'</span>,
    <span class="method">age:</span> <span class="number">50</span>
}];</code></pre>
<p>We&#39;ve got three people with three different ages. If we were to do a <code>bound</code> query of <code>bound(25, 35)</code> we&#39;ll have the records returned in the order of &#39;Aaron&#39; then &#39;John&#39;. What if we want that order reversed?</p>
<p>Easy, add a <code>desc</code> call:</p>
<pre class="highlighted"><code class="brainfuck"><span class="comment">server</span>.<span class="comment">people</span>
    <span class="string">.</span><span class="comment">query('age')</span>
    <span class="string">.</span><span class="comment">bound(25</span> <span class="string">,</span><span class="comment">35)</span>
    <span class="string">.</span><span class="comment">desc()</span>
    <span class="string">.</span><span class="comment">execute()</span>
    <span class="string">.</span><span class="comment">done(function</span> <span class="comment">(people)</span> <span class="comment">{</span>
        <span class="comment">//all</span> <span class="comment">the</span> <span class="comment">people</span> <span class="comment">who</span> <span class="comment">are</span> <span class="comment">between</span> <span class="comment">25</span> <span class="comment">and</span> <span class="comment">35</span>
    <span class="comment">});</code></pre>
<p>With the <code>desc</code> call we tell IndexedDB that we want to use <a href="http://www.w3.org/TR/IndexedDB/#cursor-concept"><code>IDBCursor.prev</code></a> which will tell IndexedDB to go backwards through our index.</p>
<h2>Unique items</h2>
<p>When you create an index you can specify if you want the data to be unique but often this wont be the case, you just want to have an index of commonly searched terms. But what if you want to get just a single entry for each record out of the index, regardless of how many there are. A use case for this would be you want to know how many unique first names there are in your store. For this we can use the <code>distinct</code> method:</p>
<pre class="highlighted"><code class="brainfuck"><span class="comment">server</span>.<span class="comment">people</span>
    <span class="string">.</span><span class="comment">query('firstName')</span>
    <span class="string">.</span><span class="comment">all()</span>
    <span class="string">.</span><span class="comment">distinct()</span>
    <span class="string">.</span><span class="comment">execute()</span>
    <span class="string">.</span><span class="comment">done(function</span> <span class="comment">(people)</span> <span class="comment">{</span>
        <span class="comment">//only</span> <span class="comment">one</span> <span class="comment">entry</span> <span class="comment">per</span> <span class="comment">name</span>
    <span class="comment">});</code></pre>
<p>The <code>distinct</code> method also augments the <code>IDBCursor</code> state by using <code>nextunique</code> or <code>prevunique</code> cursor directions which the clued in reader will realise means you can do a descending unique query as well as an ascending unique query.</p>
<p><em>Note: The way <code>prevunique</code> works is a little confusing and better covered off in a separate blog post.</em></p>
<h2>Unique keys</h2>
<p>While the previous example is good it is not exactly what we wanted for the scenario laid forth. Even though we&#39;re able to query the index and get back the unique records we get back the <em>whole</em> record. This is somewhat problematic as we&#39;re still pulling out more data than we really would want to be getting out, for the scenario we only wanted the keys. Well we can get just that information out if we need to:</p>
<pre class="highlighted"><code class="brainfuck"><span class="comment">server</span>.<span class="comment">people</span>
    <span class="string">.</span><span class="comment">query('firstName')</span>
    <span class="string">.</span><span class="comment">all()</span>
    <span class="string">.</span><span class="comment">distinct()</span>
    <span class="string">.</span><span class="comment">keys()</span>
    <span class="string">.</span><span class="comment">execute()</span>
    <span class="string">.</span><span class="comment">done(function</span> <span class="comment">(names)</span> <span class="comment">{</span>
        <span class="comment">//only</span> <span class="comment">one</span> <span class="comment">entry</span> <span class="comment">per</span> <span class="comment">name</span>
    <span class="comment">});</code></pre>
<p>By adding the <code>keys()</code> call we use an <code>openKeyCursor</code> call in IndexedDB, giving us just the keys that the index has. We can also use that in a range query:</p>
<pre class="highlighted"><code class="brainfuck"><span class="comment">server</span>.<span class="comment">people</span>
    <span class="string">.</span><span class="comment">query('age')</span>
    <span class="string">.</span><span class="comment">bound(25</span>, <span class="comment">35)</span>
    <span class="string">.</span><span class="comment">distinct()</span>
    <span class="string">.</span><span class="comment">keys()</span>
    <span class="string">.</span><span class="comment">execute()</span>
    <span class="string">.</span><span class="comment">done(function</span> <span class="comment">(ages)</span> <span class="comment">{</span>
        <span class="comment">//only</span> <span class="comment">one</span> <span class="comment">entry</span> <span class="comment">per</span> <span class="comment">age</span>
    <span class="comment">});</code></pre>
<p>This time we&#39;ll know what ages are covered by our data set.</p>
<p>A key query doesn&#39;t have to be unique though, say you want to know how many entries you have for each key:</p>
<pre class="highlighted"><code class="applescript">server.people
    .query('firstName')
    .only('Aaron')
    .keys()
    .execute()
    .done(function (names) {
        //only <span class="keyword">the</span> keys, <span class="keyword">if</span> you have multiple entries <span class="keyword">of</span> one key <span class="keyword">then</span> you will <span class="keyword">get</span> multiples <span class="keyword">in</span> <span class="keyword">the</span> <span class="constant">result</span> <span class="keyword">set</span>
    });</code></pre>
<p>This would be useful if you wanted to create a heat map from an index, you could do a map/ reduce to calculate:</p>
<pre class="highlighted"><code class="haskell"><span class="title">server</span>.people
    .query('firstName')
    .all()
    .keys()
    .execute()
    .done(function (names) {
        var <span class="typedef">dataMap = names.map<span class="container">(<span class="title">function</span>(<span class="title">x</span>)</span> <span class="container">{
          <span class="title">return</span> {
            <span class="title">key</span>: <span class="title">x</span>,
            <span class="title">count</span>: 1
          }</span>;</span>
        });

        var <span class="typedef">dataGrouped = <span class="container">{}</span>;</span>

        <span class="typedef">dataMap.forEach<span class="container">(<span class="title">function</span> (<span class="title">x</span>)</span> <span class="container">{
          <span class="title">if</span> (!<span class="title">dataGrouped</span>[<span class="title">x</span>.<span class="title">key</span>]) {
            <span class="title">dataGrouped</span>[<span class="title">x</span>.<span class="title">key</span>] = <span class="title">x</span>.<span class="title">count</span>;
          }</span> else <span class="container">{
            <span class="title">dataGrouped</span>[<span class="title">x</span>.<span class="title">key</span>]++;
          }</span></span>
        });

        console.log(<span class="typedef">dataGrouped);</span>
    });</code></pre>
<h2>Record counting</h2>
<p>Need to know how many items there are that match a query? Useful if you&#39;re implementing a paging system. Well you could perform your query and check the length of the result set or alternatively you could use the <code>count</code> method and not wait for the entries to be hydrated:</p>
<pre class="highlighted"><code class="applescript">server.people
    .query('firstName')
    .only('Aaron')
    .<span class="command">count</span>()
    .execute()
    .done(function (<span class="command">count</span>) {
        //<span class="keyword">the</span> <span class="type">number</span> <span class="keyword">of</span> records matching <span class="keyword">the</span> query
    });</code></pre>
<p><em>Note:</em> This time the argument provided to the <code>done</code> handler <em>won&#39;t</em> be an array, it will be a number.</p>
<h2>Completely custom filtering</h2>
<p>The indexes in IndexedDB are only single key indexes so there are times that you&#39;re going to be trying to create a query in a way that can&#39;t be done, say you want to query against two properties. Well that&#39;s not going to be possible to do with an index and this is where db.js can help.</p>
<p>With db.js there is a <code>filter</code> method that is exposed, this method allows you to provide it with a function that will be used to filter the results, this function must return a boolean result (<code>true</code> if you want the record, <code>false</code> if you don&#39;t). You can add as many of these as you want, but be aware of the performance hit that you may take as essentially they are provided to the <code>Array.filter</code> method:</p>
<pre class="highlighted"><code class="javascript">server.people
    .query(<span class="string">'firstName'</span>)
    .only(<span class="string">'Aaron'</span>)
    .filter(<span class="function"><span class="keyword">function</span> <span class="params">(person)</span> {</span>
        <span class="keyword">return</span> person.lastName === <span class="string">'Powell'</span>;
    })
    .execute()
    .done(<span class="function"><span class="keyword">function</span> <span class="params">(people)</span> {</span>
        <span class="comment">//only the Aaron Powell's of the world</span>
    });</code></pre>
<p>Ideally you want to be using this in conjunction with an index. As you&#39;ll see in the above example I&#39;m doing an initial <code>only</code> query to reduce our dataset base on the first names and then doing an additional filter against the persons last name to reduce our dataset event more. The <code>filter</code> method doesn&#39;t have to be applied to an index though, if you don&#39;t have an index that can represent the data you want back (say you&#39;re implementing search) you can call <code>filter</code> directly off the <code>query</code> method.</p>
<h1>Conclusion</h1>
<p>Throughout this post we&#39;ve dived deeper into the query engine of db.js, and by extension got a better understanding of how IndexedDB&#39;s indexes work.</p>
<p>We&#39;ve looked at how to create a primary key of such in our object store through the schema mechanism of db.js.</p>
<p>Next we looked at how to create custom indexes against any property on our object in our store. We then took this and looked at how to go about querying against the index in a variety of different ways that are exposed in db.js.</p>

                        </article>
                    </div>
                    <div class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <div id="disqus_thread"></div>
<script>
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
window.disqus_shortname = 'aaronpowell'; // required: replace example with your forum shortname
window.disqus_identifier = document.title || 'Home';
window.disqus_developer = !! ~document.location.href.indexOf("localhost") ? 1 : 0;
window.disqus_url = document.location.origin + '/web/dbjs-indexes-and-queries';

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by</a>
<span class="logo-disqus"> Disqus</span>

                        </article>
                    </div>
                </div>
            </div>
        </div>

        <div id="footer-wrapper">

    <!-- Copyright -->
        <div id="copyright" class="container">
            <ul class="links">
                <li>&copy; Aaron Powell. All rights reserved</li>
                <li>Design: <a href="http://html5up.net/">HTML5 UP</a></li>
            </ul>
        </div>

</div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6399564-1']);
  _gaq.push(['_trackPageview']);

  (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script>

    </body>
</html>