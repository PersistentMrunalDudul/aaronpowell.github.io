<!DOCTYPE HTML>
<!--
    Strongly Typed 1.0 by HTML5 UP
    html5up.net | @n33co
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
  <meta charset="utf-8">
  <title>Recursive Anonymous Functions - LINQ to Fail</title>
  <meta name="author" content="Aaron Powell">
  <meta name="viewport" content="width=1040" />
  <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Arvo:700" rel="stylesheet" type="text/css" />
  <link href="/css/highlightjs/solarized_light.css" rel="stylesheet" type="text/css" />
  <script src="/js/jquery-1.9.1.min.js"></script>
  <script src="/js/jquery.dropotron-1.3.js"></script>
  <script src="/js/config.js"></script>
  <script src="/js/skel.min.js"></script>
  <script src="/js/skel-ui.min.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/skel-noscript.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/style-desktop.css" />
  </noscript>
  <!--[if lte IE 8]><script src="/js/html5shiv.js"></script><![endif]-->

</head>

    <body class="left-sidebar">

        <div id="header-wrapper">
            <div id="header" class="container">
                <h1 id="logo">Recursive Anonymous Functions</h1>
                <h2>6th June 2009</h2>
                <ul class="tags">
    
        <li><a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a></li>
    
        <li><a class="icon icon-tag" href="/tagged/black-magic.html"><span>black-magic</span></a></li>
    
</ul>
                <!-- Nav -->
<nav id="nav">
    <ul>
        <li><a class="icon icon-home" href="/"><span>Home</span></a></li>
        <li><a class="icon icon-github" href="https://github.com/aaronpowell"><span>aaronpowell</span></a></li>
        <li><a class="icon icon-twitter" href="http://twitter.com/slace"><span>@slace</span></a></li>
        <li><a class="icon icon-book" href="/about"><span>About Me</span></a></li>
        <li><a class="icon icon-rss" href="/feed"><span>Feed</span></a></li>
    </ul>
</nav>

            </div>
        </div>

        <div id="main-wrapper">
            <div id="main" class="container">
                <div class="row">
                    <div id="sidebar" class="4u">
    <section>
        <ul class="divided">
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">22nd July 2013</span>
                            <h3><a href="/posts/2013-07-22-array-like-objects.html">Array-like objects</a></h3>
                        </header>
                        <p>Just because it looks like a duck, walks like a duck, quacks like a duck doesn&#39;t mean it&#39;s a duck. There&#39;s dangers with making assumptions of your JavaScript objects based on their surface area.</p>
<p>That said, a lot of power can be gleamed by these seemingly innocent assumptions.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">14th July 2013</span>
                            <h3><a href="/posts/2013-07-14-javascript-new-operator.html">The JavaScript new operator</a></h3>
                        </header>
                        <p>Time to revisit something that was overlooked in the last post, the <code>new</code> operator in JavaScript and what it does.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">10th July 2013</span>
                            <h3><a href="/posts/2013-07-10-implementing-indexers-in-javascript.html">Implementing "indexers" in JavaScript</a></h3>
                        </header>
                        <p>My colleague Luke Drumm challenged me to implement C# style indexers in JavaScript.</p>
<p>So let&#39;s have a look at how you can do that, and how you can make some very interesting JavaScript objects that are self replicating. We&#39;ll build on the knowledge of using <code>bind</code> and <code>apply</code> from the last two posts.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">5th July 2013</span>
                            <h3><a href="/posts/2013-07-05-javascript-binding-currying-and-arrows.html">JavaScript bind, currying and arrow functions</a></h3>
                        </header>
                        <p>After confusing my colleagues with how to invoke functions with a modifided set of arguments at a single time the next evolutionary point was to confuse them with creating functions that are always called with a different state.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">4th July 2013</span>
                            <h3><a href="/posts/2013-07-04-javascript-call-and-apply.html">JavaScript call and apply</a></h3>
                        </header>
                        <p>After having confused one of my colleagues with some code that used the JavaScript <code>apply</code> method and giving them an answer that didn&#39;t leave them completely bemused I thought I&#39;d share my explanation with the world.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                        </div>
                    </article>
                </li>
            
        </ul>
    </section>
</div>

                    <div id="content" class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <p>I was on <a href="http://stackoverflow.com">StackOverflow</a> the other day and I was reading a post about the <a href="http://stackoverflow.com/questions/63241/what-is-the-strangest-programming-language-you-have-used">strangest programming language you&#39;ve ever used</a>. While looking at what people have used I realized I haven&#39;t worked with anything that strange.</p>
<p>But then I was thinking there is one language I used that&#39;s a bit strange, <strong>JavaScript</strong>. </p>
<p>Without going into all the weirdness of the JavaScript language I&#39;d like to focus on one bit craziness which I&#39;m quite fond of, <strong>self executing recursive anonymous functions</strong>. Yeah it&#39;s a bit of mouthful but it&#39;s also a bit of fun, and may even have some practical uses.</p>
<p>We&#39;re all familiar with JavaScripts ability to do anonymous functions, they are often used within event delegates and and constantly used when doing jQuery. Something like this:</p>
<pre class="highlighted"><code class="r">jQuery(<span class="string">'#button'</span>).click(<span class="keyword">function</span>() { <span class="keyword">...</span> } );</code></pre>
<p>So that&#39;s the anonymous part of what we&#39;re trying to achieve, now lets look at self executing functions.
JavaScript can do self executing functions, they are generally used for creating objects. jQuery is in fact an example of this, which is why if you do a <strong>typeof jQuery</strong> you get <strong>function</strong> as the response. For example:</p>
<pre class="highlighted"><code class="r">var result = (<span class="keyword">function</span>() { <span class="keyword">...</span> })();</code></pre>
<p>Notice the () at the end, this tells the function to execute and take no parameters. But you can also do this:</p>
<pre class="highlighted"><code class="r">var result = (<span class="keyword">function</span>(node) { <span class="keyword">...</span> } )(document.getElementById(<span class="string">'button'</span>));</code></pre>
<p>I&#39;m not going to cover what a recursive function is, I&#39;m sure we all know what they are, but I did raise a problem, we&#39;re using anonymous functions, how do I call a function without a name?</p>
<p>Well JavaScript actually has a way of doing this, every JavaScript function has a hidden parameter called arguments, this is a collection of all the arguments passed into the function in the order they were passed in. So you can do something like this:</p>
<pre class="highlighted"><code class="lisp"><span class="list">(<span class="title">function</span><span class="body"><span class="list">(<span class="body">)</span></span> {
  for<span class="list">(<span class="title">var</span><span class="body"> i = <span class="number">0</span><span class="comment">; i &lt; arguments.length; i++) {</span>
    alert<span class="list">(<span class="title">arguments</span><span class="body">[i])</span></span><span class="comment">;</span>
  }
})</span></span><span class="list">(<span class="body"><span class="string">"hello"</span>, <span class="string">"world"</span>)</span></span><span class="comment">;</span></code></pre>
<p>This will do two alerts, the first saying <em>hello</em> the second saying <em>world</em>. But there&#39;s another property on the arguments object, <strong>arguments.callee</strong>. This is a reference to the method which called the current function. And because it&#39;s a reference to the function we can have some real fun, because you can <strong>execute arguments.callee</strong>!</p>
<p>Say I wanted to know if a node as a child of a node with a particular ID, I can do this:</p>
<pre class="highlighted"><code class="javascript"><span class="keyword">var</span> isChild = (<span class="keyword">function</span>(node) {
  <span class="keyword">if</span>(node) {
    <span class="keyword">if</span>(node.id === <span class="string">'parent'</span>) {
      <span class="keyword">return</span> <span class="literal">true</span>;
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> argument.callee(node.parentNode);
    }
  } <span class="keyword">else</span> {
    <span class="keyword">return</span> <span class="literal">false</span>;
  }
})(document.getElementById(<span class="string">'child'</span>));</code></pre>
<p>How nifty! Ok, yeah it does make the function a lot less reusable, but hey, this was an example of craziness of the JavaScript language! Oh, and I have used this before, see my post <a href="/creating-jquery-plugins-from-ms-ajax-components">Creating jQuery plugins for MS AJAX components, dynamically</a>!</p>
<p>And this is why JavaScript is the strangest language I have ever used.</p>

                        </article>
                    </div>
                    <div class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <div id="disqus_thread"></div>
<script>
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
window.disqus_shortname = 'aaronpowell'; // required: replace example with your forum shortname
window.disqus_identifier = document.title || 'Home';
window.disqus_developer = !! ~document.location.href.indexOf("localhost") ? 1 : 0;
window.disqus_url = document.location.origin + '/recursive-anonymous-functions';

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by</a>
<span class="logo-disqus"> Disqus</span>

                        </article>
                    </div>
                </div>
            </div>
        </div>

        <div id="footer-wrapper">

    <!-- Copyright -->
        <div id="copyright" class="container">
            <ul class="links">
                <li>&copy; Aaron Powell. All rights reserved</li>
                <li>Design: <a href="http://html5up.net/">HTML5 UP</a></li>
            </ul>
        </div>

</div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6399564-1']);
  _gaq.push(['_trackPageview']);

  (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script>

    </body>
</html>