<!DOCTYPE HTML>
<!--
    Strongly Typed 1.0 by HTML5 UP
    html5up.net | @n33co
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
  <meta charset="utf-8">
  <title>Building data with tbd - LINQ to Fail</title>
  <meta name="author" content="Aaron Powell">
  <meta name="viewport" content="width=1040" />
  <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Arvo:700" rel="stylesheet" type="text/css" />
  <link href="/css/highlightjs/solarized_light.css" rel="stylesheet" type="text/css" />
  <script src="/js/jquery-1.9.1.min.js"></script>
  <script src="/js/jquery.dropotron-1.3.js"></script>
  <script src="/js/config.js"></script>
  <script src="/js/skel.min.js"></script>
  <script src="/js/skel-ui.min.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/skel-noscript.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/style-desktop.css" />
  </noscript>
  <!--[if lte IE 8]><script src="/js/html5shiv.js"></script><![endif]-->

</head>

    <body class="left-sidebar">

        <div id="header-wrapper">
            <div id="header" class="container">
                <h1 id="logo">Building data with tbd</h1>
                <h2>12th December 2011</h2>
                <ul class="tags">
    
        
            <li><a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a></li>
        
            <li><a class="icon icon-tag" href="/tagged/nodejs.html"><span>nodejs</span></a></li>
        
    
</ul>
                <!-- Nav -->
<nav id="nav">
    <ul>
        <li><a class="icon icon-home" href="/"><span>Home</span></a></li>
        <li><a class="icon icon-github" href="https://github.com/aaronpowell"><span>aaronpowell</span></a></li>
        <li><a class="icon icon-twitter" href="http://twitter.com/slace"><span>@slace</span></a></li>
        <li><a class="icon icon-book" href="/about"><span>About Me</span></a></li>
        <li><a class="icon icon-rss" href="/feed"><span>Feed</span></a></li>
    </ul>
</nav>

            </div>
        </div>

        <div id="main-wrapper">
            <div id="main" class="container">
                <div class="row">
                    <div id="sidebar" class="4u">
    <section>
        <ul class="divided">
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">6th September 2013</span>
                            <h3><a href="/posts/2013-09-06-linq-in-javascript-es6.html">LINQ in JavaScript, ES6 style</a></h3>
                        </header>
                        <p>It&#39;s been a few years since I last blogged about the concept of LINQ in JavaScript as a lot has changed in the JavaScript landscape.</p>
<p>So let&#39;s revisit the idea of it with a look at how you could leverage LINQ in JavaScript for ES6.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/linq.html"><span>linq</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/es6.html"><span>es6</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">2nd August 2013</span>
                            <h3><a href="/posts/2013-08-02-ajax-without-jquery.html">AJAX without jQuery</a></h3>
                        </header>
                        <p>When was the last time you wrote an AJAX request?</p>
<p>When was the last time you did it without relying on jQuery?</p>
<p>In this article we&#39;ll look at how do do just that, how do make an AJAX request without jQuery to better understand what&#39;s going on.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/ajax.html"><span>ajax</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/jquery.html"><span>jquery</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">22nd July 2013</span>
                            <h3><a href="/posts/2013-07-22-array-like-objects.html">Array-like objects</a></h3>
                        </header>
                        <p>Just because it looks like a duck, walks like a duck, quacks like a duck doesn&#39;t mean it&#39;s a duck. There&#39;s dangers with making assumptions of your JavaScript objects based on their surface area.</p>
<p>That said, a lot of power can be gleamed by these seemingly innocent assumptions.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">14th July 2013</span>
                            <h3><a href="/posts/2013-07-14-javascript-new-operator.html">The JavaScript new operator</a></h3>
                        </header>
                        <p>Time to revisit something that was overlooked in the last post, the <code>new</code> operator in JavaScript and what it does.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">10th July 2013</span>
                            <h3><a href="/posts/2013-07-10-implementing-indexers-in-javascript.html">Implementing "indexers" in JavaScript</a></h3>
                        </header>
                        <p>My colleague Luke Drumm challenged me to implement C# style indexers in JavaScript.</p>
<p>So let&#39;s have a look at how you can do that, and how you can make some very interesting JavaScript objects that are self replicating. We&#39;ll build on the knowledge of using <code>bind</code> and <code>apply</code> from the last two posts.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                        </div>
                    </article>
                </li>
            
        </ul>
    </section>
</div>

                    <div id="content" class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <p>When building a UI that is driven by JavaScript one of the most tedious tasks is ensuring that you have data which you can populate into the UI to develop against. If you&#39;re like me you probably prefer to do the UI component before the server component. Alternatively you could be working in a team where someone else is responsible for developing the server component at the same time as you&#39;re developing the UI. Which ever the case is you&#39;ll find yourself in a situation where you don&#39;t have the data to build out your UI.</p>
<p>This is a situation that I find myself in quite often and it always left me thinking about how I would throw together some data to do the UI. Generally speaking it&#39;d involve a bunch of copy and pasted lines of JavaScript which builds up an object graph. This <em>does work</em> but it&#39;s not a great way to simulate data, especially if you want to change the data volumes and see how the UI will react.</p>
<p>Coming from a .NET background I&#39;ve used libraries like <a href="http://nbuilder.org/">NBuilder</a> and <a href="http://fabricator.codeplex.com/">Fabricator</a> in the past. These libraries take an input object and will generate a series of fake data from it.</p>
<p>So I thought &quot;hey, why not create that in JavaScript&quot; and from there <strong>tbd</strong> was born!</p>
<h1>tbd - Test Data Builder</h1>
<p><a href="https://github.com/aaronpowell/tbd">tbd</a>, or Test Data Builder is a project I started to create (fake) data using JavaScript. There&#39;s a bit of a joke in the name, when I was trying to pick a name I was thinking &quot;what&#39;d be quirky, it&#39;s for building test data, oh sweet, <strong>tbd</strong> since it can be Test Data Builder or <em>To Be Defined</em>, which makes for a good play on words&quot;. Now the astute reader will notice the mistake immediately but for those with reading problems like me you&#39;ll need a hint, Test Data Builder is actually <strong>tdb</strong>.</p>
<p>The idea behind tbd was to be able to take a JavaScript object and create a bunch more of them, as many as you want! I also wanted it to be disconnected to the browser so you could run it in both Node.js and the browser. For running it in the browser you need to add a reference to the file and with Node.js it&#39;s up on <a href="http://search.npmjs.org/#/tbd">npm</a>.</p>
<p>Here&#39;s a basic example of how to use it:</p>
<pre class="highlighted"><code class="haskell"><span class="title">var</span> <span class="typedef"><span class="keyword">data</span> = tbd.from<span class="container">({ <span class="title">hello</span>: '<span class="title">world'</span> })</span>.make<span class="container">(10)</span>;</span></code></pre>
<p>This will create an array of 10 objects all which are identical. Since JavaScript doesn&#39;t have reflection like .NET there isn&#39;t a way to get an inferred type of a property, instead you have to assign it a &#39;default&#39; value. This can have an advantage though as it means you can also only have tbd generate values for properties you actually want random data for. So how do you do values?</p>
<pre class="highlighted"><code class="haskell"><span class="title">var</span> <span class="typedef"><span class="keyword">data</span> = tbd.from<span class="container">({ <span class="title">foo</span>: 1 })</span></span>
            .prop('foo').use(function() { return <span class="type">Math</span>.random(); }).done()
            .make(<span class="number">10</span>);</code></pre>
<p>This will create an array of 10 items which have a unique random number (well as unique as a random number can be :P) for the property <code>foo</code>. To break down the way it works you need to understand the fluent API for properties.</p>
<ol>
<li>Pass the property name to the <code>prop</code> method as a string<ol>
<li><em>Pro tip - if the property name doesn&#39;t exist on the source object it&#39;ll still be added!</em></li>
</ol>
</li>
<li>Pass a value or function into the <code>use</code> method<ul>
<li>If you pass a value that will be used for each object</li>
<li>If you pass a function it&#39;ll be invoked for each object</li>
<li>There&#39;s some helper methods we&#39;ll look at later</li>
</ul>
</li>
<li>Call <code>done</code> to signify you&#39;ve finished with that property so you&#39;re back to the root API and allow you to modify more properties</li>
</ol>
<p>The last thing you always call is <code>make</code> and specify the number of objects you want.</p>
<p>And that&#39;s it, you can go off and create all the data you could ever want.</p>
<h1>Making better fake data</h1>
<p>Since tbd is a really dumb API if you don&#39;t tell it what to do with a property it wont do anything. So how do you produce <em>better fake data</em>? That might sound like a silly question but say you&#39;re trying to build some graphs, you don&#39;t want all the data to be the same do you?</p>
<p>Well to simplify this tbd ships with a number of useful utilities for generating better fake data. The full list you can get off the <a href="https://github.com/aaronpowell/tbd/blob/master/README.md">readme</a> but are some of the most useful IMO. All of these reside in the <code>tbd.utils</code> namespace.</p>
<h2>Pick a random value</h2>
<p>Say you want to randomly choose a value from a set of values, say a bunch of different word, there&#39;s a handy method that&#39;ll do that called <code>random</code> and you use it like so:</p>
<pre class="highlighted"><code class="haskell"><span class="title">var</span> <span class="typedef"><span class="keyword">data</span> = tbd.from<span class="container">({ <span class="title">hello</span>: '<span class="title">world'</span> })</span></span>
            .prop('hello').use(tbd.utils.random('me',<span class="string"> 'no me'</span>,<span class="string"> 'why not me!'</span>)).done()
            .make(<span class="number">10</span>);</code></pre>
<p>This method takes <em>n number of arguments</em> and it will randomly choose one of them for each object. You can pass in any data type that you want to this and it&#39;ll take a random from the list so you&#39;re not just restricted to strings.</p>
<h2>Better random numbers and dates</h2>
<p>While the <code>random</code> method is great if you have a small set of data to go through but what if you don&#39;t? What if you want a random number between 1 and 1000? Typing that out would <strong>suck</strong>. Well luckily there is the <code>range</code> method:</p>
<pre class="highlighted"><code class="haskell"><span class="title">var</span> <span class="typedef"><span class="keyword">data</span> = tbd.from<span class="container">({ <span class="title">hello</span>: '<span class="title">world'</span> })</span></span>
            .prop('hello').use(tbd.utils.range(<span class="number">1</span>, <span class="number">1000</span>)).done()
            .make(<span class="number">10</span>);</code></pre>
<p>For <code>range</code> you pass in a min and max value and something from in there will be used. This method also supports dates so you can randomly choose a date from within a range.</p>
<h2>Sequences</h2>
<p>Sometimes you just want an ordered list of values and that&#39;s where <code>sequential</code> comes in. Sequential you provide a start point and you&#39;ll get a value incremented by one each time from there:</p>
<pre class="highlighted"><code class="haskell"><span class="title">var</span> <span class="typedef"><span class="keyword">data</span> = tbd.from<span class="container">({ <span class="title">hello</span>: '<span class="title">world'</span> })</span></span>
            .prop('hello').use(tbd.utils.sequential(<span class="number">1</span>)).done()
            .make(<span class="number">10</span>);</code></pre>
<p><em>Note: I had a mistake in the initial post, the method is <code>sequential</code> not <code>sequence</code>.</em></p>
<h3>Date sequences</h3>
<p>One cool thing about the <code>sequential</code> api is that you can provide it a date and it will increment that. By default the dates will shift one day at a time to get you to your new date:</p>
<pre class="highlighted"><code class="applescript">tbd.<span class="keyword">from</span>({ <span class="type">date</span>: new Date })
    .<span class="keyword">prop</span>('foo').use(tbd.utils.sequential(new Date() /* optional parameter <span class="keyword">for</span> <span class="type">date</span> <span class="keyword">property</span> <span class="keyword">the</span> increment, default <span class="keyword">is</span> 'd' */)
    .make(<span class="number">10</span>);
//<span class="keyword">the</span> '<span class="property">day</span>' <span class="keyword">property</span> will be incremented <span class="keyword">by</span> <span class="number">1</span> <span class="keyword">from</span> <span class="keyword">the</span> starting value</code></pre>
<p>But you can overload this to increment by other date parts:</p>
<ul>
<li>y -&gt; Year</li>
<li>M -&gt; Month</li>
<li>d -&gt; Day (default)</li>
<li>h -&gt; Hour</li>
<li>m -&gt; Minutes</li>
<li>s -&gt; Seconds</li>
</ul>
<h1>Conclusion</h1>
<p>So this wraps up our look at <code>tbd</code>, a useful little tool I wrote to make it easier to build out some fake data for when you&#39;re mocking a UI or to pump into a test.</p>
<p><a href="https://github.com/aaronpowell/tbd">Grab it today!</a></p>

                        </article>
                    </div>
                    <div class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <div id="disqus_thread"></div>
<script>
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
window.disqus_shortname = 'aaronpowell'; // required: replace example with your forum shortname
window.disqus_identifier = document.title || 'Home';
window.disqus_developer = !! ~document.location.href.indexOf("localhost") ? 1 : 0;
window.disqus_url = document.location.origin + '/javascript/building-data-with-tbd';

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by</a>
<span class="logo-disqus"> Disqus</span>

                        </article>
                    </div>
                </div>
            </div>
        </div>

        <div id="footer-wrapper">

    <!-- Copyright -->
        <div id="copyright" class="container">
            <ul class="links">
                <li>&copy; Aaron Powell. All rights reserved</li>
                <li>Design: <a href="http://html5up.net/">HTML5 UP</a></li>
            </ul>
        </div>

</div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6399564-1']);
  _gaq.push(['_trackPageview']);

  (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script>

    </body>
</html>