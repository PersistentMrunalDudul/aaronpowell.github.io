<!DOCTYPE HTML>
<!--
    Strongly Typed 1.0 by HTML5 UP
    html5up.net | @n33co
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
  <meta charset="utf-8">
  <title>Tweaking console.assert in IE9 - LINQ to Fail</title>
  <meta name="author" content="Aaron Powell">
  <meta name="viewport" content="width=1040" />
  <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Arvo:700" rel="stylesheet" type="text/css" />
  <link href="/css/highlightjs/solarized_light.css" rel="stylesheet" type="text/css" />
  <script src="/js/jquery-1.9.1.min.js"></script>
  <script src="/js/jquery.dropotron-1.3.js"></script>
  <script src="/js/config.js"></script>
  <script src="/js/skel.min.js"></script>
  <script src="/js/skel-ui.min.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/skel-noscript.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/style-desktop.css" />
  </noscript>
  <!--[if lte IE 8]><script src="/js/html5shiv.js"></script><![endif]-->

</head>

    <body class="left-sidebar">

        <div id="header-wrapper">
            <div id="header" class="container">
                <h1 id="logo">Tweaking console.assert in IE9</h1>
                <h2>30th January 2011</h2>
                <ul class="tags">
    
        <li><a class="icon icon-tag" href="/tagged/ie9.html"><span>ie9</span></a></li>
    
        <li><a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a></li>
    
        <li><a class="icon icon-tag" href="/tagged/web.html"><span>web</span></a></li>
    
</ul>
                <!-- Nav -->
<nav id="nav">
    <ul>
        <li><a class="icon icon-home" href="/"><span>Home</span></a></li>
        <li><a class="icon icon-github" href="https://github.com/aaronpowell"><span>aaronpowell</span></a></li>
        <li><a class="icon icon-twitter" href="http://twitter.com/slace"><span>@slace</span></a></li>
        <li><a class="icon icon-book" href="/about"><span>About Me</span></a></li>
        <li><a class="icon icon-rss" href="/feed"><span>Feed</span></a></li>
    </ul>
</nav>

            </div>
        </div>

        <div id="main-wrapper">
            <div id="main" class="container">
                <div class="row">
                    <div id="sidebar" class="4u">
    <section>
        <ul class="divided">
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">9th August 2011</span>
                            <h3><a href="/posts/2011-08-09-a-story.html">JavaScript: A story</a></h3>
                        </header>
                        <p>Everyone use to notice the old war veteran that sat on the corner. His uniform was tatty and he’s always be spouting about his heyday with lines like “Don’t  you remember my role in the first brows...</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/random.html"><span>random</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">19th April 2013</span>
                            <h3><a href="/posts/2013-04-19-ie-useragents.html">Internet Explorer userAgents</a></h3>
                        </header>
                        <p>A new program from the IE team</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/internet-explorer.html"><span>internet-explorer</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/web.html"><span>web</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">14th January 2013</span>
                            <h3><a href="/posts/2013-01-14-ie10-console-thoughts.html">Making the Internet Explorer JavaScript tools better, again</a></h3>
                        </header>
                        <p>A look at what&#39;s changed since I last pointed out the failings of the IE dev tools</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/web.html"><span>web</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/internet-explorer.html"><span>internet-explorer</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/web-dev.html"><span>web-dev</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">7th January 2013</span>
                            <h3><a href="/posts/2013-01-07-thoughts-on-typescript.html">Thoughts on TypeScript</a></h3>
                        </header>
                        <p>Some of my impressions from trying to implement something in TypeScript</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/javascript.html"><span>javascript</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/typescript.html"><span>typescript</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">18th October 2012</span>
                            <h3><a href="/posts/2012-10-18-dbjs-chrome.html">Chrome support for db.js</a></h3>
                        </header>
                        <p>A little word on the db.js support for Chrome</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/indexeddb.html"><span>indexeddb</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/chrome.html"><span>chrome</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/web.html"><span>web</span></a>
                            
                        </div>
                    </article>
                </li>
            
        </ul>
    </section>
</div>

                    <div id="content" class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <p>Today while writing some JavaScript I was using the <code>console.assert</code> method to work out the state of things at different points in time.</p>
<p>If you&#39;re not familiar with <code>console.assert</code> here&#39;s the method signature:</p>
<pre class="highlighted"><code class="matlab"><span class="transposed_variable">console.</span>assert(expression, message<span class="matrix">[, object]</span>)</code></pre>
<p>What this allows you to do is pass in an expression to be evaluated, a message to display when the expression is <code>false</code> and an optional object to dump.</p>
<p>This is really useful if you&#39;re writing large chunks of JavaScript and you can&#39;t/ don&#39;t want to attach the debugger (common if you&#39;re working with timeouts and intervals), you can have the application assertion results to the console to be observed.</p>
<p>I was using this in Chrome and FireFox (since the machine I have at work only has XP so no IE9 :() and found it really useful to be able to log out the optional object.</p>
<p>When doing so you end up with something like this:</p>
<p><img src="http://www.aaron-powell.com/get/javascript/ie9-console-assert/chrome-console.png" alt="Chrome console.assert"></p>
<p>As you can see you can inspect into the object that you dumped out. Sweet!</p>
<p>Something you may already be aware of is that IE9 also includes a <code>console</code> object (yay, no more <code>alert</code> debugging :P), and it also contains an implementation of <code>console.assert</code>. So I decided to test and see how it goes in IE9, and here&#39;s what it looks like:</p>
<p><img src="http://www.aaron-powell.com/get/javascript/ie9-console-assert/ie9-bad.png" alt="IE9 sad face"></p>
<p>Oh dear, <code>[object Object]</code>, where&#39;s my object to inspect? This isn&#39;t good now is it. The problem is that the IE9 <code>console.assert</code> method calls <code>toString()</code> on your object, resulting in the <code>[object Object]</code> output. It&#39;s also right up against message.</p>
<p>Well let&#39;s fix it, the best thing about JavaScript is that you can just change stuff if you don&#39;t like it. So here&#39;s a method you can run in JavaScript to replace the out-of-the-box <code>console.assert</code> method:</p>
<pre class="highlighted"><code class="lisp"><span class="list">(<span class="title">function</span><span class="body"><span class="list">(<span class="title">assert</span><span class="body">)</span></span> {

    console.assert = function<span class="list">(<span class="title">expression</span><span class="body">, message, object)</span></span> {
        if<span class="list">(<span class="title">object</span><span class="body">)</span></span> {
            //we only want to do this if they did provide an object
            assert<span class="list">(<span class="title">expression</span><span class="body">, message, ' &gt;&gt;&gt; ' + JSON.stringify<span class="list">(<span class="title">object</span><span class="body">)</span></span>)</span></span><span class="comment">;</span>
        } else {
            assert<span class="list">(<span class="title">expression</span><span class="body">, message)</span></span><span class="comment">;</span>
        }
    }<span class="comment">;    </span>

})</span></span><span class="list">(<span class="title">console</span><span class="body">.assert)</span></span><span class="comment">;</span></code></pre>
<p>Here we&#39;re creating an anonymous function that we&#39;ll immediately execute, pass in the standard <code>console.assert</code> and then augment it with using <code>JSON.stringify</code>. The beauty of this is that the native method is still being called, but if you&#39;re passing in an object we&#39;re converting it to a JSON string first.</p>
<p>Now when you do a <code>console.assert</code> and provide an object you get this:</p>
<p><img src="http://www.aaron-powell.com/get/javascript/ie9-console-assert/ie9-good.png" alt="IE9 happy"></p>
<p>It&#39;s not perfect, you can&#39;t inspect into the object since it&#39;s just a string, but it does suite for a lot of purposes.</p>
<p>Just don&#39;t be silly and pass in <code>jQuery</code> as the object, you&#39;ll end up with something quite large :P.</p>
<p><strong>Disclaimer: This was done against the IE9 Beta (build 9.0.7930.16406) so it may change by the time of official release.</strong></p>
<p><strong>Disclaimer 2: Tested against the RC and it still doesn&#39;t produce an object inspection so this work around is still handy.</strong></p>

                        </article>
                    </div>
                    <div class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <div id="disqus_thread"></div>
<script>
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
window.disqus_shortname = 'aaronpowell'; // required: replace example with your forum shortname
window.disqus_identifier = document.title || 'Home';
window.disqus_developer = !! ~document.location.href.indexOf("localhost") ? 1 : 0;
window.disqus_url = document.location.origin + '/ie-9-console-assert';

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by</a>
<span class="logo-disqus"> Disqus</span>

                        </article>
                    </div>
                </div>
            </div>
        </div>

        <div id="footer-wrapper">

    <!-- Copyright -->
        <div id="copyright" class="container">
            <ul class="links">
                <li>&copy; Aaron Powell. All rights reserved</li>
                <li>Design: <a href="http://html5up.net/">HTML5 UP</a></li>
            </ul>
        </div>

</div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6399564-1']);
  _gaq.push(['_trackPageview']);

  (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script>

    </body>
</html>