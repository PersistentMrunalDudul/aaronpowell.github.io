<!DOCTYPE HTML>
<!--
    Strongly Typed 1.0 by HTML5 UP
    html5up.net | @n33co
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
  <meta charset="utf-8">
  <title>Forcing Windows 8 soft keyboard to hide - LINQ to Fail</title>
  <meta name="author" content="Aaron Powell">
  <meta name="viewport" content="width=1040" />
  <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Arvo:700" rel="stylesheet" type="text/css" />
  <link href="/css/highlightjs/solarized_light.css" rel="stylesheet" type="text/css" />
  <script src="/js/jquery-1.9.1.min.js"></script>
  <script src="/js/jquery.dropotron-1.3.js"></script>
  <script src="/js/config.js"></script>
  <script src="/js/skel.min.js"></script>
  <script src="/js/skel-ui.min.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/skel-noscript.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/style-desktop.css" />
  </noscript>
  <!--[if lte IE 8]><script src="/js/html5shiv.js"></script><![endif]-->

</head>

    <body class="left-sidebar">

        <div id="header-wrapper">
            <div id="header" class="container">
                <h1 id="logo">Forcing Windows 8 soft keyboard to hide</h1>
                <h2>31st August 2012</h2>
                <ul class="tags">
    
        <li><a class="icon icon-tag" href="/tagged/xaml.html"><span>xaml</span></a></li>
    
</ul>
                <!-- Nav -->
<nav id="nav">
    <ul>
        <li><a class="icon icon-home" href="/"><span>Home</span></a></li>
        <li><a class="icon icon-github" href="https://github.com/aaronpowell"><span>aaronpowell</span></a></li>
        <li><a class="icon icon-twitter" href="http://twitter.com/slace"><span>@slace</span></a></li>
        <li><a class="icon icon-book" href="/about"><span>About Me</span></a></li>
        <li><a class="icon icon-rss" href="/feed"><span>Feed</span></a></li>
    </ul>
</nav>

            </div>
        </div>

        <div id="main-wrapper">
            <div id="main" class="container">
                <div class="row">
                    <div id="sidebar" class="4u">
    <section>
        <ul class="divided">
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">14th September 2012</span>
                            <h3><a href="/posts/2012-09-14-settings-suck.html">The settings suck</a></h3>
                        </header>
                        <p>Settings in Windows 8 XAML suck. Period.</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/xaml.html"><span>xaml</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/windows8.html"><span>windows8</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/rant.html"><span>rant</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">28th August 2012</span>
                            <h3><a href="/posts/2012-08-28-webview-oh-you.html">WebView, oh you!</a></h3>
                        </header>
                        <p>Oh that WebView control is a funny one</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/xaml.html"><span>xaml</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/facepalm.html"><span>facepalm</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">20th August 2012</span>
                            <h3><a href="/posts/2012-08-20-xaml-by-a-web-guy.html">XAML by a web guy</a></h3>
                        </header>
                        <p>So I&#39;m starting to learn XAML...</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/xaml.html"><span>xaml</span></a>
                            
                        </div>
                    </article>
                </li>
            
        </ul>
    </section>
</div>

                    <div id="content" class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <p>We had a bug raised that when the user presses enter on the sign in screen the login process begins but the soft keyboard (the on-screen keyboard) doesn&#39;t get dismissed so the user gets the impression they can keep interacting with it. Through some <a href="http://en.wikipedia.org/wiki/Monkey_test">Monkey Testing</a> this produced a bug where the application would crash because it would fire off multiple requests to log in as they could keep hitting enter and eventually crashing the application.</p>
<p>The logical solution is to hide the soft keyboard.</p>
<p>But here&#39;s a question, how <em>would</em> you hide the keyboard in Windows 8 XAML?</p>
<h1>Thought #1 - remove focus</h1>
<p>I&#39;m a <a href="http://www.aaron-powell.com/xaml/xaml-by-a-web-guy">web guy</a> so when I want to defocus an element I use <code>blur</code>, so that&#39;s my first point of call.</p>
<p>But of course there&#39;s no <code>Blur</code> method on XAML elements. Strike that off the list.</p>
<h1>Thought #2 - change focus</h1>
<p>My research lead me to <a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh702161.aspx">Focus</a> as a method on controls which takes a <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.focusstate.aspx">FocusState</a> enum value, one of the properties being <code>Unfocused</code>. Bingo!</p>
<p>But every time I set it the app would crash with an <code>AccessViolationException</code> (or something to that effect). Great, that&#39;s no help now is it! Moving on...</p>
<h1>Thought #3 - FocusManager</h1>
<p>Fine well apparently WPF has a <a href="http://msdn.microsoft.com/en-us/library/system.windows.input.focusmanager.aspx">FocusManager</a> that you can also use to change focus. This is <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.input.focusmanager.aspx">also available</a> in Windows 8 XAML, but do you think that&#39;d have the <code>SetFocusedElement</code> on it?</p>
<p>No, that&#39;d be too simple! Guess we can strike this one down too</p>
<h1>One hack to rule them all</h1>
<p>Since you don&#39;t have access to the soft keyboard programmatically and every attempt made to change focus was either throwing exceptions or simply missing anything useful it was time to think outside the box.</p>
<p>It was time for a <strong>hack</strong>!</p>
<p>A funny thing about input controls in Windows 8 XAML is if they are not enabled, ie - read-only, the soft keyboard wont display for them. Well that makes sense doesn&#39;t it and hey, they were bound to get <em>something</em> right eventually!</p>
<p>This gave me an idea, let&#39;s make the textbox read-only. The only problem is this has to be done <em>as early as possible</em>, even before we validate, to prevent undesired keyboard mashing. This also means that our validation wont be done so there&#39;s a chance that we&#39;ll have a failure in sign in and need to make the fields writeable again.</p>
<p>So all we did was add this to our event handler:</p>
<pre class="highlighted"><code class="objectivec">username<span class="variable">.IsEnabled</span> = password<span class="variable">.IsEnabled</span> = <span class="literal">false</span>;
username<span class="variable">.IsEnabled</span> = password<span class="variable">.IsEnabled</span> = <span class="literal">true</span>;</code></pre>
<p>Yes, one line after the other like that and you hide your soft keyboard. <strong>facepalm</strong></p>
<h1>TL;DR</h1>
<p>Want to hide your soft keyboard in Windows 8 XAML?</p>
<p><img src="http://www.aaron-powell.com/get/memes/disable-all-the-things.jpg" alt="Disable all the things"></p>

                        </article>
                    </div>
                    <div class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <div id="disqus_thread"></div>
<script>
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
window.disqus_shortname = 'aaronpowell'; // required: replace example with your forum shortname
window.disqus_identifier = document.title || 'Home';
window.disqus_developer = !! ~document.location.href.indexOf("localhost") ? 1 : 0;
window.disqus_url = document.location.origin + '/xaml/forcing-windows-8-keyboard-to-hide';

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by</a>
<span class="logo-disqus"> Disqus</span>

                        </article>
                    </div>
                </div>
            </div>
        </div>

        <div id="footer-wrapper">

    <!-- Copyright -->
        <div id="copyright" class="container">
            <ul class="links">
                <li>&copy; Aaron Powell. All rights reserved</li>
                <li>Design: <a href="http://html5up.net/">HTML5 UP</a></li>
            </ul>
        </div>

</div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6399564-1']);
  _gaq.push(['_trackPageview']);

  (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script>

    </body>
</html>