<!DOCTYPE HTML>
<!--
    Strongly Typed 1.0 by HTML5 UP
    html5up.net | @n33co
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
  <meta charset="utf-8">
  <title>Flight Mode - IndexedDB - LINQ to Fail</title>
  <meta name="author" content="Aaron Powell">
  <meta name="viewport" content="width=1040" />
  <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Arvo:700" rel="stylesheet" type="text/css" />
  <link href="/css/highlightjs/solarized_light.css" rel="stylesheet" type="text/css" />
  <script src="/js/jquery-1.9.1.min.js"></script>
  <script src="/js/jquery.dropotron-1.3.js"></script>
  <script src="/js/config.js"></script>
  <script src="/js/skel.min.js"></script>
  <script src="/js/skel-ui.min.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/skel-noscript.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/style-desktop.css" />
  </noscript>
  <!--[if lte IE 8]><script src="/js/html5shiv.js"></script><![endif]-->

</head>

    <body class="left-sidebar">

        <div id="header-wrapper">
            <div id="header" class="container">
                <h1 id="logo">Flight Mode - IndexedDB</h1>
                <h2>27th May 2013</h2>
                <ul class="tags">
    
        <li><a class="icon icon-tag" href="/tagged/flight-mode.html"><span>flight-mode</span></a></li>
    
        <li><a class="icon icon-tag" href="/tagged/offline-storage.html"><span>offline-storage</span></a></li>
    
        <li><a class="icon icon-tag" href="/tagged/indexeddb.html"><span>indexeddb</span></a></li>
    
</ul>
                <!-- Nav -->
<nav id="nav">
    <ul>
        <li><a class="icon icon-home" href="/"><span>Home</span></a></li>
        <li><a class="icon icon-github" href="https://github.com/aaronpowell"><span>aaronpowell</span></a></li>
        <li><a class="icon icon-twitter" href="http://twitter.com/slace"><span>@slace</span></a></li>
        <li><a class="icon icon-book" href="/about"><span>About Me</span></a></li>
        <li><a class="icon icon-rss" href="/feed"><span>Feed</span></a></li>
    </ul>
</nav>

            </div>
        </div>

        <div id="main-wrapper">
            <div id="main" class="container">
                <div class="row">
                    <div id="sidebar" class="4u">
    <section>
        <ul class="divided">
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">18th October 2012</span>
                            <h3><a href="/posts/2012-10-18-dbjs-chrome.html">Chrome support for db.js</a></h3>
                        </header>
                        <p>A little word on the db.js support for Chrome</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/indexeddb.html"><span>indexeddb</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/chrome.html"><span>chrome</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/web.html"><span>web</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">30th May 2013</span>
                            <h3><a href="/posts/2013-05-30-libraries.html">Flight Mode - Libraries</a></h3>
                        </header>
                        <p>Throughout the last few posts we&#39;ve looked at the different ways which we can store data offline in browsers and then created a basic little API that will help is with doing that. The <code>FlightMode</code> ...</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/flight-mode.html"><span>flight-mode</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/indexeddb.html"><span>indexeddb</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/localStorage.html"><span>localStorage</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/sessionStorage.html"><span>sessionStorage</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/offline-storage.html"><span>offline-storage</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">23rd May 2013</span>
                            <h3><a href="/posts/2013-05-23-introduction.html">Flight Mode - Introduction</a></h3>
                        </header>
                        <p>So you&#39;ve got an idea to build an amazing new web application, it&#39;s going to make you tens of dollars, hundreds of cents, it&#39;s all web API&#39;ed and SPA. There&#39;s a responsive design so it&#39;s mobile fri...</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/offline-storage.html"><span>offline-storage</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/flight-mode.html"><span>flight-mode</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">23rd May 2013</span>
                            <h3><a href="/posts/2013-05-23-cookies.html">Flight Mode - Cookies</a></h3>
                        </header>
                        <p>In the beginning there was a simple way to store data offline in an application, or more accurately, across sessions, and that is the HTTP Cookie.</p>
<p>Cookies are used for everything, they can [track ...</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/offline-storage.html"><span>offline-storage</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/flight-mode.html"><span>flight-mode</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/cookies.html"><span>cookies</span></a>
                            
                        </div>
                    </article>
                </li>
            
                <li>
                    <article class="is-excerpt">
                        <header>
                            <span class="date">23rd May 2013</span>
                            <h3><a href="/posts/2013-05-23-local-session-storage.html">Flight Mode - local and session storage</a></h3>
                        </header>
                        <p>Last time we looked a <a href="/flight-mode/cookies">using cookies to store offline data</a> and we also saw that there&#39;s a number of problems with that approach. So let&#39;s move forward, let&#39;s look at what our...</p>

                        <div class="tags">
                            
                                <a class="icon icon-tag" href="/tagged/flight-mode.html"><span>flight-mode</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/offline-storage.html"><span>offline-storage</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/localStorage.html"><span>localStorage</span></a>
                            
                                <a class="icon icon-tag" href="/tagged/sessionStorage.html"><span>sessionStorage</span></a>
                            
                        </div>
                    </article>
                </li>
            
        </ul>
    </section>
</div>

                    <div id="content" class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <p>The next stop in our offline storage adventure is to look at the big daddy of offline storage, <a href="http://www.w3.org/TR/IndexedDB/">IndexedDB</a>. Now I&#39;ve <a href="http://www.aaron-powell.com/tagged/indexeddb">blogged about <code>IndexedDB</code> in the past</a> but today I want to talk about it in a bit higher level and introduce the idea of IndexedDB beyond just how to use the API.</p>
<p>IndexedDB is the latest approach to doing offline storage in offline applications, it is designed as a replacement for the <a href="http://www.w3.org/TR/webdatabase/">WebSQL spec which is now discontinued</a>. One of the main reasons that WebSQL was discontinued was because it was tied to a specific version of <a href="http://www.sqlite.org/">SQLite</a> which introduced some problems. Need to change something in the way the API worked you needed to change the SQLite specification first. So IndexedDB was proposed as a replacement to WebSQL and the design was not tied to any particular underlying technology (<a href="http://www.aaron-powell.com/web/indexeddb-storage">I&#39;ve previously blogged about how different browsers store their data</a>).</p>
<p>IndexedDB is quite different to WebSQL where instead of being a dialect of the SQL language IndexedDB much more closely related to a NoSQL, or Document Database (it&#39;s not true document database but I&#39;m not here to argue semantics). Data is stored as the objects that they are (once they&#39;ve been cloned, so you don&#39;t maintain prototype chains), not as strings like we&#39;ve seen in the other options.</p>
<h2>Benefits of IndexedDB for storage</h2>
<p>There&#39;s several important benefits of IndexedDB over the other storage options we&#39;ve looked at, the first is something that&#39;s a very big break from other options, asynchronicity.</p>
<p>Where the other APIs all perform their operations in a synchronous manner IndexedDB doesn&#39;t. This means that we get the benefits of having a non-blocking operation, so if you&#39;re writing a large amount of data, you are on a low powered device, are experiencing high disk I/O, etc then you don&#39;t want to have the user seem like your web application has crashed while you&#39;re storing their data. Asynchronous operations aren&#39;t exactly a new concept on the web so it&#39;s nice to see that it&#39;s come to the storage level.</p>
<p>The next benefit is transactions. Anyone who&#39;s done database work will know the benefit of this within an application. Once you start doing lots of read/write options, accepting user input and so on the chance of getting data that you <em>can&#39;t</em> handle is high. Transactions give you a benefit so that you can group operations and then if they fail roll them all back without getting your data store into a corrupt state. Transactions can also be read-only or read-write meaning that you can more selectively lock your data depending on the kind of operations being undertaken an limit the chance of corruption.</p>
<p>And then there&#39;s the way it handles data, where the previous options were storing data as strings, meaning we have to serialize/deserialize IndexedDB stores the data as the objects that were provided (<a href="http://www.w3.org/TR/IndexedDB/#object-store-storage-operation">admittedly there&#39;s a few steps it goes through first</a>). This means that we can do a few smarter things on top of what we could do with strings, firstly we can create indexes. Again if you&#39;re familiar with databases you&#39;ll be familiar with indexes, but basically these allow us a nifty way to produce optimal query points. Say you&#39;ve got people objects and you always query by <code>firstName</code> so then you can create an index so it&#39;ll optimize that kind of query. Which then leads on to the next part about handling data, querying. Since we&#39;re storing full objects when we want to find data (such as with our <code>getAll</code> method) we have our full object to then work against rather than just doing it against the full in-memory collection.</p>
<h2>Drawbacks of IndexedDB for storage</h2>
<p>The biggest drawback of IndexedDB is probably going to be a pretty obvious one for an API that is as new as it is and that&#39;s browser support. At the time of writing the following browsers support IndexedDB unprefixed:</p>
<ul>
<li>Internet Explorer 10+</li>
<li>Chrome 25+</li>
<li>Firefox 19+</li>
</ul>
<p>So you can see that there&#39;s a major limitation when we&#39;re looking to go offline, the mobile space. Because of the browser support Windows Phone 8 is the only phone that supports IndexedDB natively. Luckily there&#39;s hope, there&#39;s a <a href="http://nparashuram.com/IndexedDBShim/">shim for IndexedDB</a> that used WebSQL as the underlying store. This means that iOS Safari (and desktop Safari) as well as Android can have the API exposed to them.</p>
<p>The other biggest drawback for me is the API, it&#39;s excessively verbose and generally feels very foreign to front-end development. Things like <code>transaction</code>, <code>index</code> and <code>cursor</code> are not really common concepts when you talk to front-end developers. And then there&#39;s API calls like <code>cursor.continue()</code> when you&#39;re iterating through a query, while it might look innocuous the problem is that <code>continue</code> is a reserved word in JavaScript so pretty much every editor I&#39;ve used (and most linters) will raise a squiggly/warning which the ODC-coder in my flinches at, resulting in a lot of code people write like <code>cursor[&#39;continue&#39;]();</code>. And on the verbosity, say you want to query a store on a non-unique index (our <code>firstName</code> property for example), to do that you must:</p>
<ul>
<li>Have an open connection to your database, <code>indexedDB.openDatabase(&#39;my-db&#39;)</code>, and wait for it to succeed</li>
<li>Open a transaction, <code>db.transaction(&#39;my-store&#39;)</code></li>
<li>Open the store from the transaction, <code>transaction.objectStore(&#39;my-store&#39;)</code></li>
<li>Open an index from the store, <code>IDBKeyRange.only(&#39;firstName&#39;, &#39;Aaron&#39;)</code></li>
<li>Open a cursor with the index, <code>store.openCursor(index)</code>, and wait for it to succeed</li>
<li>In the success method of the query check to see if there was a cursor, if there was get its value and either work with it our push it to an array in the closure then call <code>cursor.continue()</code> or if there was no cursor ignore it (no cursor is the end of the query)</li>
<li>In the success method of the transaction process the captured values, assuming you wanted to work with them all together</li>
</ul>
<p>That&#39;s a lot of steps to get data by a property...</p>
<p>This then brings us to how you listen to the asynchronous actions. Generally you&#39;ll see code like this:</p>
<pre class="highlighted"><code class="r">request.onsuccess = <span class="keyword">function</span> (e) { <span class="keyword">...</span> };</code></pre>
<p>To me that feels very reminiscent of the IE6 era where events were registered by <code>on&lt;something&gt;</code>. Admittedly you can use <code>addEventListener</code> since IndexedDB uses the DOM3 event specification, but it seems to be the less-used approach in the documentation.</p>
<h2>Implementing IndexedDB storage</h2>
<p>When we have a look at implementing IndexedDB storage on top of our <code>FlightMode</code> API that we&#39;ve been using there&#39;s an immediate problem, we&#39;ve been only working with synchronous APIs up until now but as I mentioned above one of IndexedDB&#39;s benefits is that it is asynchronous. Because of this we&#39;ll have to approach the API usage a bit differently, first up the <code>FlightMode</code> constructor now has two new arguments, a <code>migrate</code> and a <code>ready</code> callback argument. The <code>ready</code> argument is the most important one, it will be triggered when our IndexedDB connection is open and we can start using the API. The <code>migrate</code> callback on the other hand is used to allow you to manipulate the objectStore (such as create indexes) if required. Additionally to make it nicer to work with the asynchronous nature of the API I&#39;ve leverages the <a href="http://promises-aplus.github.io/promises-spec/">Promise/A+</a> specification for handling the events via the <a href="http://documentup.com/kriskowal/q/">Q</a> library.</p>
<p><em>Side note: If you&#39;re not familiar with Promises have a read through <a href="http://www.aaron-powell.com/doing-it-wrong/blinking-marquee">my series on exploring them with jQuery</a>. It&#39;s not exactly the same as Promise/A+, you can read about the differences <a href="http://domenic.me/2012/10/14/youre-missing-the-point-of-promises/">here</a>.</em></p>
<p><em>Warning: This is a <strong>really</strong> basic IndexedDB implementation, it glances over much of the really powerful features, such as complex index queries, for information on that check out my <a href="http://www.aaron-powell.com/tagged/indexeddb">other IndexedDB posts</a>.</em></p>
<p>Our internal <code>Store</code> object has got a much more complex constructor this time since there&#39;s a few more things we need to do, we must:</p>
<ul>
<li>Open our connection to the database</li>
<li>Create the object store if required</li>
<li>Notify the consumer that the API is ready</li>
</ul>
<p>So it will look more like this:</p>
<pre class="highlighted"><code class="matlab">var Store = <span class="function"><span class="keyword">function</span> <span class="params">(name, onMigrate, onSuccess)</span> {</span>
    var that = this;
    var request = <span class="transposed_variable">indexedDB.</span>open(<span class="string">'flight-mode'</span>);
    <span class="transposed_variable">this.</span>storeName = name;

    <span class="transposed_variable">request.</span>onsuccess = <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> {</span>
        <span class="transposed_variable">that.</span>db = <span class="transposed_variable">e.</span><span class="transposed_variable">target.</span>result;

        onSuccess();
    };

    <span class="transposed_variable">request.</span>onupgradeneeded = <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> {</span>
        var db = <span class="transposed_variable">e.</span><span class="transposed_variable">target.</span>result;

        var store = <span class="transposed_variable">db.</span>createObjectStore(name, <span class="cell">{ keyPath: <span class="string">'__id__'</span>, autoIncrement: true }</span>);

        <span class="keyword">if</span> (onMigrate) <span class="cell">{
            onMigrate(store);
        }</span>
    };
};</code></pre>
<p>One nice thing about IndexedDB is that it can automatically create an <code>id</code> for the object, which I&#39;ve turned on (it&#39;ll be stored in the <code>__id__</code> property) and set to <code>autoIncrement: true</code> so that it will create a new one for each record.</p>
<p>To use this we would do something like so:</p>
<pre class="highlighted"><code class="javascript"><span class="keyword">var</span> ready = <span class="literal">false</span>;
<span class="keyword">var</span> store = <span class="keyword">new</span> FlightMode(<span class="string">'my-store'</span>, <span class="string">'indexedDB'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span> ready = <span class="literal">true</span>; });</code></pre>
<p>It is a bit tedious that we&#39;d have to check for the <code>ready</code> flag before any query or risk the API not being ready to use but that is something you can program around with <code>Promise/A+</code> pretty easily.</p>
<p>As I mentioned in my drawbacks list the API is very verbose, but we can still make it reasonably simple to use as a consumer and hide away that verbosity. Let&#39;s look at the <code>add</code> method. Again since this is asynchronous we&#39;ll need to take that into consideration. This is where I&#39;m leveraging <code>Q</code>, I&#39;m creating a deferred object that you then will interact with.</p>
<pre class="highlighted"><code class="javascript">Store.prototype.add = <span class="keyword">function</span>(obj) {
    <span class="keyword">var</span> transaction = <span class="keyword">this</span>.db.transaction(<span class="keyword">this</span>.storeName, <span class="string">'readwrite'</span>);
    <span class="keyword">var</span> store = transaction.objectStore(<span class="keyword">this</span>.storeName);

    <span class="keyword">var</span> d = Q.defer();
    store.add(obj).onsuccess = <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> {</span>
        d.resolve(e.target.result);
    };
    <span class="keyword">return</span> d.promise;
};</code></pre>
<p>First things first we need to create a new transaction, this is a <strong>writable</strong> transaction since we&#39;ll manipulate data. From said transaction we can then go out and get our object store that we&#39;re writing to. Lastly we setup our deferred object from Q which we&#39;ll then return so we can use the Promise. When you add a record into the object store it&#39;ll fire off the <code>success</code> event when done and an <code>error</code> event if it was to fail. I&#39;m omitting error handling here to save code, but you&#39;d capture the <code>IDBRequest</code> from the <code>add</code> call which you attach other handlers to.</p>
<p>When the request is successful the events <em>target</em> will be the <code>id</code> that was generated by IndexedDB for us. If you&#39;re <em>not</em> using auto-incrementing IDs the value will be what ever you defined as your <code>keyPath</code> anyway. I&#39;m then resolving that out via our Promise resulting in an API usage like so:</p>
<pre class="highlighted"><code class="matlab"><span class="transposed_variable">store.</span>add(<span class="cell">{ firstName: <span class="string">'Aaron'</span>, lastName: <span class="string">'Powell'</span> }</span>).then(<span class="function"><span class="keyword">function</span> <span class="params">(id)</span> {</span>
    <span class="transposed_variable">console.</span><span class="built_in">log</span>(<span class="string">'Object stored with id'</span>, id);
});</code></pre>
<p>Getting a record out by it&#39;s <code>id</code> is also reasonably trivial once you understand the basis of IndexedDB, here&#39;s the code:</p>
<pre class="highlighted"><code class="actionscript">Store.prototype.<span class="keyword">get</span> = <span class="keyword">function</span>(id) {
    <span class="keyword">var</span> transaction = <span class="keyword">this</span>.db.transaction(<span class="keyword">this</span>.storeName);
    <span class="keyword">var</span> store = transaction.objectStore(<span class="keyword">this</span>.storeName);

    <span class="keyword">var</span> d = Q.defer();
    store.<span class="keyword">get</span>(id).onsuccess = <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> {</span>
        <span class="keyword">var</span> obj = e.target.result;
        <span class="keyword">if</span> (obj) {
            d.resolve(obj);
        } <span class="keyword">else</span> {
            d.reject(<span class="string">'No item matching id "'</span> + id + <span class="string">'" was found'</span>);
        }

    };
    <span class="keyword">return</span> d.promise;
};</code></pre>
<p>We have a few things in common with the <code>add</code> method, but this time we don&#39;t specify what type of <code>transaction</code> we want. If you <em>don&#39;t</em> specify a type it will be read-only as transactions are read-only by default.</p>
<p><em>Note: If you want to be explicit about it pass in <code>readonly</code> as the second argument.</em></p>
<p>Like <code>add</code> the <code>store.get</code> method returns an <code>IDBRequest</code> which we listen for events on. When the object doesn&#39;t exist in our store it won&#39;t raise an error as this isn&#39;t really an error state, instead we&#39;ll have the request succeed and the <code>target</code> of the event will be <code>null</code>. This means that we have to do the check inside the <code>success</code> handler and in this case I&#39;m rejecting the Promise with an error message to consumers.</p>
<p>We end up with a usage like so:</p>
<pre class="highlighted"><code class="matlab"><span class="transposed_variable">store.</span>get(<span class="number">1</span>).then(<span class="function"><span class="keyword">function</span> <span class="params">(obj)</span> {</span>
    <span class="transposed_variable">console.</span><span class="built_in">log</span>(<span class="string">'Object found'</span>, obj);
}, <span class="function"><span class="keyword">function</span> <span class="params">(msg)</span> {</span>
    <span class="transposed_variable">console.</span><span class="built_in">log</span>(msg);
});</code></pre>
<p>The final thing that really gets the power out of IndexedDB is that we can produce indexed queries, so finding items is more optimal. To do this we need to leverage the <code>migrate</code> callback so we can create ourselves an index for the <code>objectStore</code>. it would look something like this:</p>
<pre class="highlighted"><code class="javascript"><span class="keyword">var</span> store = <span class="keyword">new</span> FlightMode(<span class="string">'my-store'</span>, <span class="string">'indexedDB'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    ready = <span class="literal">true</span>;
}, <span class="function"><span class="keyword">function</span> <span class="params">(store)</span> {</span>
    store.createIndex(<span class="string">'firstName'</span>, <span class="string">'firstName'</span>);
});</code></pre>
<p>The <code>migrate</code> method receives an instance of our <code>objectStore</code> which we can then create indexes from using the <code>createIndex</code> method. This takes a <code>name</code> for the index and a <code>keyPath</code> for the property of the object we want to index. Optionally you can pass in some options such as whether it should be a unique index.</p>
<p>With the index created we can then use it within the <code>getBy</code> method, like so:</p>
<pre class="highlighted"><code class="javascript">Store.prototype.getBy = <span class="keyword">function</span>(property, value) {
    <span class="keyword">var</span> transaction = <span class="keyword">this</span>.db.transaction(<span class="keyword">this</span>.storeName);
    <span class="keyword">var</span> store = transaction.objectStore(<span class="keyword">this</span>.storeName);

    <span class="keyword">var</span> d = Q.defer();
    <span class="keyword">var</span> items = [];

    <span class="keyword">var</span> index = index = store.index(property);

    index.openCursor().onsuccess = <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> {</span>
        <span class="keyword">var</span> cursor = e.target.result;
        <span class="keyword">if</span> (cursor) {
            items.push(cursor.value);
            cursor[<span class="string">'continue'</span>]();
        }
    };
    transaction.oncomplete = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        d.resolve(items);
    };
    <span class="keyword">return</span> d.promise;
};</code></pre>
<p>To query the <code>index</code> we need to use a <code>cursor</code> (and as I mentioned above the <code>continue</code> method is annoying...). Next we listen to the <code>success</code> event of the cursor request, extracting the items out as we navigate through the cursor.</p>
<p>Once the cursor is exhausted the <code>transaction</code> will be completed and then we can resolve all the items which we wanted from it.</p>
<p>You can find the rest of the implementation <a href="https://github.com/aaronpowell/flight-mode-blog/src/adapters/indexeddb.js">in the github repository</a>.</p>
<h1>Conclusion</h1>
<p>IndexedDB is still rather new a technology so it&#39;s something that needs to be used with a certain bit of caution, if you can&#39;t target only the latest browsers then it might not be possible to use it in your application.</p>
<p>That said it is a <strong>really</strong> powerful API, the fact that it is asynchronous is alone a reason that it should be chosen over pretty much any other storage option when storing large amounts of data.</p>
<p>While there are drawbacks with the API design, particularly the fact that it can be very verbose <em>and</em> very foreign to web developers it isn&#39;t that difficult to hide away the bulk of the API with your own façade, using libraries like <code>Q</code> to make it easier to interact with the API and only exposing the features that you really need in your application.</p>
<p>Definitely keep an eye on IndexedDB in the coming years, especially when doing Windows 8 applications, as it&#39;ll be more available and more important for building offline applications.</p>

                        </article>
                    </div>
                    <div class="8u skel-cell-mainContent">
                        <article class="is-post">
                            <div id="disqus_thread"></div>
<script>
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
window.disqus_shortname = 'aaronpowell'; // required: replace example with your forum shortname
window.disqus_identifier = document.title || 'Home';
window.disqus_developer = !! ~document.location.href.indexOf("localhost") ? 1 : 0;
window.disqus_url = document.location.origin + '/flight-mode/indexeddb';

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by</a>
<span class="logo-disqus"> Disqus</span>

                        </article>
                    </div>
                </div>
            </div>
        </div>

        <div id="footer-wrapper">

    <!-- Copyright -->
        <div id="copyright" class="container">
            <ul class="links">
                <li>&copy; Aaron Powell. All rights reserved</li>
                <li>Design: <a href="http://html5up.net/">HTML5 UP</a></li>
            </ul>
        </div>

</div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6399564-1']);
  _gaq.push(['_trackPageview']);

  (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script>

    </body>
</html>